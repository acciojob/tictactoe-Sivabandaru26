<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tic Tac Toe</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
    }
    .container {
      margin-top: 30px;
    }
    .hide {
      display: none;
    }
    .board {
      display: grid;
      grid-template-columns: repeat(3, 100px);
      grid-template-rows: repeat(3, 100px);
      gap: 2px;
      margin: 20px auto;
      width: max-content;
    }
    .cell {
      background: pink;
      border: 1px solid black;
      font-size: 2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    .message {
      font-size: 18px;
      margin: 15px 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Input Form -->
    <form id="player-form">
      <h2>Tic Tac Toe</h2>
      <label>Player 1 <input type="text" id="player-1" placeholder="enter name"></label><br><br>
      <label>Player 2 <input type="text" id="player-2" placeholder="enter name"></label><br><br>
      <button type="submit" id="submit">Start Game</button>
    </form>

    <!-- Game Area -->
    <div id="game-area" class="hide">
      <h1>Tic Tac Toe</h1>
      <div class="message" id="message"></div>
      <div class="board" id="board"></div>
    </div>
  </div>

  <script>
    const form = document.getElementById("player-form");
    const gameArea = document.getElementById("game-area");
    const board = document.getElementById("board");
    const message = document.getElementById("message");

    let player1 = "", player2 = "";
    let currentPlayer = "";
    let currentSymbol = "X";
    let moves = Array(9).fill(null);

    const winningCombos = [
      [0,1,2],[3,4,5],[6,7,8], // rows
      [0,3,6],[1,4,7],[2,5,8], // cols
      [0,4,8],[2,4,6]          // diagonals
    ];

    form.addEventListener("submit", e => {
      e.preventDefault();
      player1 = document.getElementById("player-1").value || "Player 1";
      player2 = document.getElementById("player-2").value || "Player 2";
      currentPlayer = player1;
      currentSymbol = "X";
      form.classList.add("hide");
      gameArea.classList.remove("hide");
      message.innerText = `${currentPlayer}, you're up`;

      // create board
      board.innerHTML = "";
      for(let i=0;i<9;i++){
        const cell = document.createElement("div");
        cell.classList.add("cell");
        cell.id = i+1;
        cell.addEventListener("click", handleMove, { once: true });
        board.appendChild(cell);
      }
    });

    function handleMove(e){
      const cell = e.target;
      const index = parseInt(cell.id)-1;

      moves[index] = currentSymbol;
      cell.innerText = currentSymbol;

      if(checkWinner()){
        message.innerText = `${currentPlayer}, congratulations you won!`;
        endGame();
        return;
      }

      if(moves.every(m => m!==null)){
        message.innerText = "It's a draw!";
        return;
      }

      // switch turns
      if(currentSymbol==="X"){
        currentSymbol="O";
        currentPlayer=player2;
      } else {
        currentSymbol="X";
        currentPlayer=player1;
      }
      message.innerText = `${currentPlayer}, you're up`;
    }

    function checkWinner(){
      return winningCombos.some(combo =>
        combo.every(index => moves[index]===currentSymbol)
      );
    }

    function endGame(){
      const cells = document.querySelectorAll(".cell");
      cells.forEach(cell => cell.removeEventListener("click", handleMove));
    }
  </script>
</body>
</html>
